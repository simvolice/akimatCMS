<div class="row" ng-controller="protoCtrl" ng-cloak>
    <div class="col-md-12">
        <md-content id="mainpage" layout="column" flex class="custom__md-content__categ">


            <md-card>
                <md-tabs md-dynamic-height md-border-bottom>


                    <md-tab label="Создать страницу">
                        <md-content class="md-padding">



                            <div class="row">
                                <div class="col-md-12">


                                    <md-input-container class="md-block">
                                        <label>Имя страницы</label>
                                        <input type="text" ng-model="titlepost">
                                    </md-input-container>


                                </div>


                            </div>



                            <div class="row">
                                <div class="col-md-12">


                                    <md-input-container class="md-block">
                                        <label>Вставить код iframe из PowerBI</label>
                                        <textarea ng-model="iframepowerbi" rows="5" md-select-on-focus></textarea>
                                    </md-input-container>


                                </div>


                            </div>


                            <div class="row">



                                    <div class="col-md-12">


                                        <md-input-container>
                                            <label>Выбрать раздел меню</label>
                                            <md-select ng-model="selectedItem"
                                                       md-on-close="clearSearchTerm()"
                                                       data-md-container-class="selectdemoSelectHeader"
                                            >
                                                <md-select-header class="demo-select-header">
                                                    <input ng-model="searchTerm"
                                                           type="search"
                                                           placeholder="Поиск..."
                                                           class="demo-header-searchbox md-text"
                                                           ng-keydown="$event.stopPropagation($event)">
                                                </md-select-header>
                                                <md-optgroup label="Группа">
                                                    <md-option ng-value="itemMenu.uniqKey" ng-repeat="itemMenu in menusFlat |
              filter:searchTerm">{{itemMenu.title}}</md-option>
                                                </md-optgroup>
                                            </md-select>
                                        </md-input-container>


                                    </div>




                            </div>


                            <hr>


                            <div class="row">
                                <div class="col-md-4">


                                    <md-input-container>
                                        <label>Выбрать страницу для удаления</label>
                                        <md-select ng-model="selectedPost"
                                                   md-on-close="clearSearchTermPost()"
                                                   data-md-container-class="selectdemoSelectHeader"
                                                   md-on-open="openSelectPost()">
                                            <md-select-header class="demo-select-header">
                                                <input ng-model="searchTermPost"
                                                       type="search"
                                                       placeholder="Поиск..."
                                                       class="demo-header-searchbox md-text"
                                                       ng-keydown="$event.stopPropagation($event)">
                                            </md-select-header>
                                            <md-optgroup label="Группа">
                                                <md-option ng-value="itemPost._id" ng-repeat="itemPost in allpost |
              filter:searchTerm">{{itemPost.titlepost}}</md-option>
                                            </md-optgroup>
                                        </md-select>
                                    </md-input-container>


                                </div>


                                <div class="col-md-8">
                                    <md-button class="md-raised md-primary" ng-click="deletePost()">Удалить страницу
                                    </md-button>

                                </div>


                            </div>



                            <div class="row">
                                <div class="col-md-1">
                                    <md-button class="md-raised md-primary" ng-click="savePost()">Сохранить
                                    </md-button>

                                </div>
                            </div>


                        </md-content>
                    </md-tab>





                    <md-tab label="Загрузить Excel файл">
                        <md-content class="md-padding">


                            <div class="row">
                                <div class="col-md-12">



                                    <div class="upload-btn-wrapper">

                                        <md-button class="md-fab md-primary md-mini" aria-label="Profile" ng-click="showHelp($event)">
                                            <md-icon class="material-icons">help_outline</md-icon>
                                        </md-button>


                                        <button class="btn">Загрузить новую таблицу</button>
                                        <input ng-files="getTheFilesCVS($files)" id="cvsfile" type="file" class="form-control"
                                               accept="application/vnd.ms-excel" multiple/>
                                        <label for="file" id="filenamecvs"></label>
                                    </div>








                                </div>

                            </div>








                            <div class="row" style="margin-top: 50px">
                                <div class="col-md-12">



                                    <md-input-container class="md-block" flex-gt-sm>
                                        <label class="textTitle">Поиск...</label>
                                        <input ng-model="search">
                                    </md-input-container>


                                    <style type="text/css">
                                        .tg  {border-collapse:collapse;border-spacing:0; width: 100%; margin-top: 20px}
                                        .tg td{font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;}
                                        .tg th{font-family:Arial, sans-serif;font-size:14px;font-weight:normal;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;}
                                        .tg .tg-0ord{text-align:center}
                                        .tg .tg-lqy6{text-align:left; word-break: break-all }
                                        .tg .tg-lqy8{text-align:center; width: 300px}
                                        .tg .tg-hgcj{font-weight:bold;text-align:center}
                                        .tg .tg-yw4l{vertical-align:top}
                                    </style>
                                    <table class="tg table-striped">



                                        <thead>


                                        <tr>


                                            <th class="tg-hgcj">Наименование таблицы</th>



                                            <th class="tg-hgcj">Редактировать</th>
                                            <th class="tg-hgcj">Удалить</th>

                                        </tr>
                                        </thead>


                                        <tr ng-repeat="tableNameOne in dataTableName | filter:search">
                                            <td class="tg-lqy6">



                                                {{tableNameOne}}


                                            </td>





                                            <td class="tg-0ord">

                                                <i class="material-icons" ng-click="editTable(tableNameOne)">done_all</i>

                                            </td>



                                            <td class="tg-0ord">
                                                <i class="material-icons" ng-click="deleteTable(tableNameOne, $index)">delete_forever</i>

                                            </td>
                                        </tr>

                                    </table>




                                </div>

                            </div>




                        </md-content>
                    </md-tab>




                    <md-tab label="Управление пользователями">
                        <md-content class="md-padding">





                            <div class="row">
                                <div class="col-md-12">
                                    <md-button class="md-raised md-primary" ng-click="addUsers()">Создать пользователя
                                    </md-button>

                                </div>
                            </div>



                            <div class="row">
                                <div class="col-md-12">

                                    <style type="text/css">
                                        .tg  {border-collapse:collapse;border-spacing:0; width: 100%; margin-top: 20px}
                                        .tg td{font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;}
                                        .tg th{font-family:Arial, sans-serif;font-size:14px;font-weight:normal;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;}
                                        .tg .tg-0ord{text-align:center}
                                        .tg .tg-lqy6{text-align:left; width: 600px;}
                                        .tg .tg-lqy8{text-align:center; width: 300px}
                                        .tg .tg-hgcj{font-weight:bold;text-align:center}
                                        .tg .tg-yw4l{vertical-align:top}
                                    </style>
                                    <table class="tg table-striped">



                                        <thead>


                                        <tr>


                                            <th>Имя пользователя</th>

                                            <th>Роль</th>
                                            <th>Пароль</th>

                                            <th>Редактировать</th>
                                            <th>Удалить</th>

                                        </tr>
                                        </thead>


                                        <tr ng-repeat="x in data">
                                            <td class="tg-lqy6">




                                                <input type="text" value="{{x.name}}" ng-model="x.name">




                                            </td>
                                            <td class="tg-lqy8">



                                                <md-select ng-model="x.roleId" placeholder="Выбрать роль"
                                                           class="md-no-underline textTitle">
                                                    <md-option ng-repeat="role in x.allRoles" ng-value="role._id">
                                                        {{role.namerole}}
                                                    </md-option>
                                                </md-select>






                                            </td>



                                            <td class="tg-lqy8">



                                                <input type="text" value="{{x.newPass}}" ng-model="x.newPass">






                                            </td>

                                            <td class="tg-0ord">

                                                <i class="material-icons" ng-click="updateUser(x)">done_all</i>

                                            </td>



                                            <td class="tg-0ord">
                                                <i class="material-icons" ng-click="deleteUser(x._id, $index)">delete_forever</i>

                                            </td>
                                        </tr>

                                    </table>




                                </div>

                            </div>





                        </md-content>
                    </md-tab>


                    <md-tab label="Работа с разделами меню">
                        <md-content class="md-padding">





                            <div class="row">
                                <div class="col-md-12">
                                    <md-button class="md-raised md-primary" ng-click="addNewMenu()">Создать новый пункт меню
                                    </md-button>


                                    <md-button class="md-raised md-primary" ng-click="saveMenu()">Сохранить все изменения
                                    </md-button>

                                </div>
                            </div>



                            <div class="row">
                                <div class="col-md-12">



                                    <script type="text/ng-template" id="menuTree">



                                        <i class="material-icons" ng-hide="menuItem.id">subdirectory_arrow_right</i>


                                        <input type="text" value="{{menuItem.title}}" ng-model="menuItem.title"
                                               style="width: 500px;">


                                        <md-button class="md-secondary"
                                                   ng-click="addSecondItemMenu(menuItem.childs)">Добавить
                                            подраздел
                                        </md-button>

                                        <md-button class="md-secondary md-fab md-primary md-mini"
                                                   aria-label="Profile" ng-click="deleteItemMenu(menuItem.uniqKey, menuItem.id)">
                                            <md-icon class="material-icons">delete_forever</md-icon>
                                        </md-button>


                                        <ol ng-if="menuItem.childs" class="custom__ol__style">

                                            <li class="secondary-button-padding" ng-repeat="menuItem in menuItem.childs" ng-include="'menuTree'">



                                            </li>



                                        </ol>







                                    </script>

                                    <ol class="custom__ol__style">




                                        <li class="secondary-button-padding" ng-repeat="menuItem in menus" ng-include="'menuTree'">


                                        </li>






                                    </ol>

                                </div>

                            </div>





                        </md-content>
                    </md-tab>





                </md-tabs>
            </md-card>







        </md-content>
    </div>





</div>